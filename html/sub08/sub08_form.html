<!DOCTYPE html>
<html lang="ko">

<head>
    <!-- meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>탐라는제주 - 숨어 있던 진짜 hot한 제주</title>
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    <meta property="og:title" content="탐라는제주">
    <meta property="og:type" content="website">
    <meta property="og:description" content="탐라는제주 - 숨어 있던 진짜 hot한 제주">
    <!-- css -->
    <link rel="stylesheet" href="../../css/common.css" />
    <link rel="stylesheet" href="../../css/layout.css" />
    <!-- sub08 -->
    <link rel="stylesheet" type="text/css" href="../../css/sub08.css">
    <!-- logo font -->
    <link href="https://fonts.googleapis.com/css?family=Gugi" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--bootstrap-->
    <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <!-- sweetArert2 -->
    <link rel="stylesheet" href="../../node_modules/sweetalert2/dist/sweetalert2.min.css">
    <style type="text/css">
        @import url('https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.min.css');
    </style>





</head>

<body>
    <div class="editor-header" id="se_top_menu_area">
        <div class="header-default">
            <div class="header-nav">
                <div>
                    <button id="save">저장</button>
                    <button id="submit">발행</button>
                    <button id="exit">나가기</button>
                </div>

            </div>


            <div id="se_doctoolbar" class="header-docProperty">

            </div>

        </div>
        <div class="header_title">TamLaIsJeJu</div>
    </div>
    <div id="sub08" class="editor_wrap">

        <div class="editor_container clear">

            <div class="editor-side-innerWrap">
                <div class="editor_side_inner_content">
                    <div class="editor_side_btn">
                        <p>사진도구</p>
                        <button class="side_upload_btn">
                            <span class="side_upload"></span> 사진업로드</button>
                        <button class="side_sns_btn">
                            <span class="side_sns"></span>sns사진</button>
                        <button class="side_lib_btn">
                            <span class="side_lib"></span>사진보관함</button>
                        <button class="side_auto_btn">
                            <span class="side_auto"></span>자동포스팅</button>
                    </div>

                    <!-- <div class="editor_side_partner">
                        <p>
                            일행
                        </p>
                        <div class=".partner_selector">
                            <ul class="clear">
                                <li id="p_type1">
                                    혼자
                                </li>
                                <li id="p_type2">
                                    부모님
                                </li>
                                <li id="p_type3">
                                    아이
                                </li>
                                <li id="p_type4">
                                    커플
                                </li>
                                <li id="p_type5">
                                    친구
                                </li>
                                <li id="p_type6">
                                    단체
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="editor_side_favorite">
                        <p>
                            취향
                        </p>
                        <div class="favorite_selector">
                            <ul class="clear">
                                <li id="p_type1">
                                    걷기
                                </li>
                                <li id="p_type2">
                                    사진
                                </li>
                                <li id="p_type3">
                                    힐링
                                </li>
                                <li id="p_type4">
                                    관광
                                </li>
                                <li id="p_type5">
                                    드라이브
                                </li>
                                <li id="p_type6">
                                    체험
                                </li>
                                <li id="p_type7">
                                    교육
                                </li>
                                <li id="p_type8">
                                    엑티비티
                                </li>
                                <li id="p_type9">
                                    쇼핑
                                </li>
                            </ul>
                        </div>
                    </div> -->

                    <div class="editor_side_tag">
                        <p>
                            HashTag 입력
                        </p>
                        <div class="animated bounceInDown">

                            <input id="input" type="text" placeholder="HashTag 엔터로 입력">
                            <button id="enter">hashtag</button>
                            <ul id="tag_box" class="tag_cls">
                            </ul>
                        </div>
                    </div>


                </div>
            </div>

            <div class="content_wrap">
                <div class="title_wrap">
                    <div class="title_text">
                        <form>
                            <textarea class="title_textarea text_area" placeholder="제목" rows="1" data-is-observable="false"></textarea>
                        </form>
                    </div>
                </div>
                <div class="cntmap_wrap">
                    <div class="contnet_map">
                        <div class="map_wrap">
                            <div id="editor-map" style="width:100%;height:400px;position:relative;overflow:hidden;"></div>
                        </div>
                        <!-- <div class=map2 style="width: 100%;height: 400px;background-color: teal;"></div> -->
                    </div>
                </div>
                <div class="cal_warp">
                    <div class="cal">
                        <div class="start_date date-picker">
                            <div class="input">
                                <div class="result">
                                    <span class="date_text">출발일</span>
                                    <span id="sdt" class="date_result"></span>
                                </div>
                                <button>
                                    <i class="fa fa-calendar"></i>
                                </button>
                            </div>
                            <div class="calendar"></div>
                        </div>
                        <div class="end_date date-picker">
                            <div class="input">
                                <div class="result">
                                    <span class="date_text">도착일</span>
                                    <span id="edt" class="date_result"></span>
                                </div>
                                <button>
                                    <i class="fa fa-calendar"></i>
                                </button>
                            </div>
                            <div class="calendar"></div>
                        </div>
                        <div class="cal_days">
                            <span>총</span>
                            <span id="cal_day">0</span>
                            <spam>일</span>
                        </div>
                    </div>
                </div>
                <div id="post_wraps">
                    <div id="cont_1" class="post_wrap">

                        <div class="post_imgbox" data-toggle="modal" data-target=".bd-example-modal-lg1">
                            클릭하여 사진 등록
                            <img src="">
                        </div>
                        <div class="post_text">


                            <form>
                                <input id="post_title_1" type="text" value="" class="post_titl" placeholder="장소">
                                <input id="post_address_1" type="text" onclick="addrClick(this)" class="post_addr" value="" placeholder="주소" readonly data-toggle="modal"
                                    data-target=".bd-example-modal-lg-map1">
                                <input id="post_x_1" type="text" onclick="" class="post_x" value="" placeholder="위도" hidden>
                                <input id="post_y_1" type="text" onclick="/*sample5_execDaumPostcode()*/" class="post_y" value="" placeholder="경도" hidden>
                                <!-- <div id="map" style="width:300px;height:300px;margin-top:10px;display:none"></div> -->
                                <textarea id="post_text_form" class="title_textarea text_area" placeholder="내용을 입력하세요." data-is-observable="false"></textarea>
                                <div class="text_count">글자제한:
                                    <span class="count">80</span>/80</div>
                                <button onclick="map()"></button>
                            </form>
                        </div>
                    </div>
                </div>
                <div id="cnt_add_wrap" onclick="add_div()">
                    <span class="cnt_add_btn1">+</span>
                    <span class="cnt_add_btn2">클릭하여 게시물 추가하기</span>
                </div>

            </div>
            <!--모달-->
            <div id="modalDiv">
                <div class="modal fade bd-example-modal-lg1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5>사진업로드</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <!--dropzone-->

                            <div id="trueForm">
                                <div class="dropzone" onclick="imgClickBoxs(this)">
                                    <div>
                                    </div>
                                    <span class="dz_ico">+</span>
                                    <div id="imgbox1_1" class="imgboxs1">업로드 대기중인 사진이 없습니다.</div>
                                </div>

                                <div id="imgbox2_1" class="imgboxs2">
                                    <p>업로드 완료된 사진</p>
                                </div>
                                <input id="fileupload1" type="file" class='fileuploads' name="files" multiple hidden>
                                <!-- 고유 값이 필요한 경우 -->


                                <div class="clear">

                                    <!--업로드 버튼을 여러 장의 사진 일회용 업로드 기능 제공-->

                                    <!-- <button id="btnAllClear" disabled="disabled">취소</button> -->

                                    <button id="btnSubmit" class="btnSubmits" type="button">사진업로드</button>

                                </div>

                            </div>

                        </div>
                    </div>
                </div>
                <!-- 모달2 -->
                <div id="map_modal" class="modal fade bd-example-modal-lg-map1" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="display: none">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <div class="modal-content">
                            <div class="map_wrap">
                                <div id="map" style="width:800px;height:500px;position:relative;overflow:hidden;"></div>
                                <div id="menu_wrap" class="bg_white">
                                    <div class="option">
                                        <div>
                                            <form class="search_bar" onsubmit="searchPlaces(); return false;">
                                                장소명 :
                                                <input class="search_input" type="text" value="제주도" + id="keyword" size="15">
                                                <button class="search_btn" type="submit">검색하기</button>
                                            </form>
                                        </div>
                                    </div>
                                    <hr>
                                    <ul id="placesList"></ul>
                                    <div id="pagination"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--commonJS-->
        <script src="../../js/common/common.js"></script>
        <!-- logo font -->
        <script type="text/javascript" src="../../js/common/jquery-3.3.1.min.js"></script>
        <script type="text/javascript" src="../../js/common/jquery-ui.min.js"></script>
        <!--bootstrap-->
        <script type="text/javascript" src="../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
        <!-- sweetArert2 -->
        <script type="text/javascript" src="../../node_modules/sweetalert2/dist/sweetalert2.min.js"></script>
        <!--metadata-->
        <!-- <script type="text/javascript" src="metadeta/jpegmeta.js"></script>
            <script type="text/javascript" src="metadeta/demo.js"></script> -->
        <!--jQuery upload-->
        <script src="../../node_modules/blueimp-file-upload/js/vendor/jquery.ui.widget.js"></script>
        <script src="../../node_modules/blueimp-file-upload/js/jquery.iframe-transport.js"></script>
        <script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload.js"></script>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=619a7dc4f7d23963aa128663f464c8d5&libraries=services"></script>
        <script src="../../node_modules/blueimp-load-image/js/load-image.all.min.js"></script>
        <script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-process.js"></script>
        <script src="../../node_modules/blueimp-file-upload/js/jquery.fileupload-image.js"></script>



        <script>
            var mapArr = new Array();
            var mapData = null;
            var addrValue = null;
            var placeValue = null;
            var xValue = null;
            var yValue = null;

            // 마커를 담을 배열입니다
            var markers = [];

            function addrClick(val) {
                console.log($(val).parent().children()[0])
                addrValue = val;
                placeValue = $(val).parent().children()[0]
                xValue = $(val).parent().children()[2]
                yValue = $(val).parent().children()[3]
            }
            var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                mapOption = {
                    center: new daum.maps.LatLng(37.566826, 126.9786567), // 지도의 중심좌표
                    level: 3 // 지도의 확대 레벨
                };

            // 지도를 생성합니다    
            var map = new daum.maps.Map(mapContainer, mapOption);

            // 장소 검색 객체를 생성합니다
            var ps = new daum.maps.services.Places();

            // 검색 결과 목록이나 마커를 클릭했을 때 장소명을 표출할 인포윈도우를 생성합니다
            var infowindow = new daum.maps.InfoWindow({
                zIndex: 1
            });

            // 키워드로 장소를 검색합니다
            searchPlaces();

            // 키워드 검색을 요청하는 함수입니다
            function searchPlaces() {

                var keyword = document.getElementById('keyword').value;

                if (!keyword.replace(/^\s+|\s+$/g, '')) {
                    alert('키워드를 입력해주세요!');
                    return false;
                }

                // 장소검색 객체를 통해 키워드로 장소검색을 요청합니다
                ps.keywordSearch("제주도 " + keyword, placesSearchCB);

            }

            // 장소검색이 완료됐을 때 호출되는 콜백함수 입니다
            function placesSearchCB(data, status, pagination) {
                if (status === daum.maps.services.Status.OK) {

                    // 정상적으로 검색이 완료됐으면
                    // 검색 목록과 마커를 표출합니다
                    displayPlaces(data);
                    mapData = data;



                    // 지도데이터
                    for (let i = 0; i < data.length; i++) {
                        mapArr[i] = $(data[i])[0]
                        console.log($(data[i])[0])
                    }
                    $('.item').click(function () {
                        console.log($(data[$(this).index()])[0])
                        addrValue.value = $(data[$(this).index()])[0].address_name
                        placeValue.value = $(data[$(this).index()])[0].place_name
                        xValue.value = $(data[$(this).index()])[0].x
                        yValue.value = $(data[$(this).index()])[0].y
                        swal(
                            "'" + $(data[$(this).index()])[0].place_name + "'",
                            '리스트에 추가하였습니다.',
                            'success'
                        )
                        xyname()
                        $(".close").trigger('click')
                    })

                    // $(data).click(function () {
                    //     console.log(this)
                    // })

                    // 페이지 번호를 표출합니다
                    displayPagination(pagination);

                } else if (status === daum.maps.services.Status.ZERO_RESULT) {

                    alert('검색 결과가 존재하지 않습니다.');
                    return;

                } else if (status === daum.maps.services.Status.ERROR) {

                    alert('검색 결과 중 오류가 발생했습니다.');
                    return;

                }
            }



            // 검색 결과 목록과 마커를 표출하는 함수입니다
            function displayPlaces(places) {

                var listEl = document.getElementById('placesList'),
                    menuEl = document.getElementById('menu_wrap'),
                    fragment = document.createDocumentFragment(),
                    bounds = new daum.maps.LatLngBounds(),
                    listStr = '';

                // 검색 결과 목록에 추가된 항목들을 제거합니다
                removeAllChildNods(listEl);

                // 지도에 표시되고 있는 마커를 제거합니다
                removeMarker();

                for (var i = 0; i < places.length; i++) {

                    // 마커를 생성하고 지도에 표시합니다
                    var placePosition = new daum.maps.LatLng(places[i].y, places[i].x),
                        marker = addMarker(placePosition, i),
                        itemEl = getListItem(i, places[i]); // 검색 결과 항목 Element를 생성합니다

                    // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
                    // LatLngBounds 객체에 좌표를 추가합니다
                    bounds.extend(placePosition);

                    // 마커와 검색결과 항목에 mouseover 했을때
                    // 해당 장소에 인포윈도우에 장소명을 표시합니다
                    // mouseout 했을 때는 인포윈도우를 닫습니다
                    (function (marker, title) {
                        daum.maps.event.addListener(marker, 'mouseover', function () {
                            displayInfowindow(marker, title);
                        });

                        daum.maps.event.addListener(marker, 'mouseout', function () {
                            infowindow.close();
                        });

                        itemEl.onmouseover = function () {
                            displayInfowindow(marker, title);
                        };

                        itemEl.onmouseout = function () {
                            infowindow.close();
                        };
                    })(marker, places[i].place_name);

                    fragment.appendChild(itemEl);
                }

                // 검색결과 항목들을 검색결과 목록 Elemnet에 추가합니다
                listEl.appendChild(fragment);
                menuEl.scrollTop = 0;

                // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
                map.setBounds(bounds);
            }

            // 검색결과 항목을 Element로 반환하는 함수입니다
            function getListItem(index, places) {

                var el = document.createElement('li'),
                    itemStr = '<span class="markerbg marker_' + (index + 1) + '"></span>' +
                    '<div class="info">' +
                    '   <h5>' + places.place_name + '</h5>';

                if (places.road_address_name) {
                    itemStr += '    <span>' + places.road_address_name + '</span>' +
                        '   <span class="jibun gray">' + places.address_name + '</span>';
                } else {
                    itemStr += '    <span>' + places.address_name + '</span>';
                }

                itemStr += '  <span class="tel">' + places.phone + '</span>' +
                    '</div>';

                el.innerHTML = itemStr;
                el.className = 'item';

                return el;
            }

            // 마커를 생성하고 지도 위에 마커를 표시하는 함수입니다
            function addMarker(position, idx, title) {
                var imageSrc = 'http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // 마커 이미지 url, 스프라이트 이미지를 씁니다
                    imageSize = new daum.maps.Size(36, 37), // 마커 이미지의 크기
                    imgOptions = {
                        spriteSize: new daum.maps.Size(36, 691), // 스프라이트 이미지의 크기
                        spriteOrigin: new daum.maps.Point(0, (idx * 46) + 10), // 스프라이트 이미지 중 사용할 영역의 좌상단 좌표
                        offset: new daum.maps.Point(13, 37) // 마커 좌표에 일치시킬 이미지 내에서의 좌표
                    },
                    markerImage = new daum.maps.MarkerImage(imageSrc, imageSize, imgOptions),
                    marker = new daum.maps.Marker({
                        position: position, // 마커의 위치
                        image: markerImage
                    });

                marker.setMap(map); // 지도 위에 마커를 표출합니다
                markers.push(marker); // 배열에 생성된 마커를 추가합니다

                return marker;
            }

            // 지도 위에 표시되고 있는 마커를 모두 제거합니다
            function removeMarker() {
                for (var i = 0; i < markers.length; i++) {
                    markers[i].setMap(null);
                }
                markers = [];
            }

            // 검색결과 목록 하단에 페이지번호를 표시는 함수입니다
            function displayPagination(pagination) {
                var paginationEl = document.getElementById('pagination'),
                    fragment = document.createDocumentFragment(),
                    i;

                // 기존에 추가된 페이지번호를 삭제합니다
                while (paginationEl.hasChildNodes()) {
                    paginationEl.removeChild(paginationEl.lastChild);
                }

                for (i = 1; i <= pagination.last; i++) {
                    var el = document.createElement('a');
                    el.href = "#";
                    el.innerHTML = i;

                    if (i === pagination.current) {
                        el.className = 'on';
                    } else {
                        el.onclick = (function (i) {
                            return function () {
                                pagination.gotoPage(i);
                            }
                        })(i);
                    }

                    fragment.appendChild(el);
                }
                paginationEl.appendChild(fragment);
            }

            // 검색결과 목록 또는 마커를 클릭했을 때 호출되는 함수입니다
            // 인포윈도우에 장소명을 표시합니다
            function displayInfowindow(marker, title) {
                var content = '<div style="padding:5px;z-index:1;">' + title + '</div>';

                infowindow.setContent(content);
                infowindow.open(map, marker);
            }

            // 검색결과 목록의 자식 Element를 제거하는 함수입니다
            function removeAllChildNods(el) {
                while (el.hasChildNodes()) {
                    el.removeChild(el.lastChild);
                }
            }


            function relayout() {

                // 지도를 표시하는 div 크기를 변경한 이후 지도가 정상적으로 표출되지 않을 수도 있습니다
                // 크기를 변경한 이후에는 반드시  map.relayout 함수를 호출해야 합니다 
                // window의 resize 이벤트에 의한 크기변경은 map.relayout 함수가 자동으로 호출됩니다
                map.relayout();
            }
            $("#map_modal").on('shown.bs.modal', function (e) {
                e.preventDefault();
                searchPlaces();
                relayout();
            });
            // 지도2
            var mapContainer2 = document.getElementById('editor-map'), // 지도를 표시할 div  
                mapOption = {
                    center: new daum.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                    level: 10 // 지도의 확대 레벨
                };

            var map2 = new daum.maps.Map(mapContainer2, mapOption); // 지도를 생성합니다

            // 마커를 표시할 위치와 title 객체 배열입니다 
            var positions = [];
            // var addrValue = null;
            // var placeValue = null;
            // var xValue = null;
            // var yValue = null;

            var marker = null;
            var markerImage = null;
            var imageSize = null;
            var imageSrc = null;

            function xyname() {
                positions.push({
                    title: placeValue.value,
                    latlng: new daum.maps.LatLng(yValue.value, xValue.value)
                })
                imageSrc = "http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";


                for (var i = 0; i < positions.length; i++) {
                    console.log("호출")

                    // 마커 이미지의 이미지 크기 입니다
                    imageSize = new daum.maps.Size(24, 35);

                    // 마커 이미지를 생성합니다    
                    markerImage = new daum.maps.MarkerImage(imageSrc, imageSize);

                    // 마커를 생성합니다
                    marker = new daum.maps.Marker({
                        map: map2, // 마커를 표시할 지도
                        position: positions[i].latlng, // 마커를 표시할 위치
                        title: positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                        image: markerImage // 마커 이미지 
                    });
                }

                console.log(positions)
            }

            // [{
            //         title: '카카오',
            //         latlng: new daum.maps.LatLng(33.450705, 126.570677)
            //     },
            //     {
            //         title: '생태연못',
            //         latlng: new daum.maps.LatLng(33.450936, 126.569477)
            //     },
            //     {
            //         title: '텃밭',
            //         latlng: new daum.maps.LatLng(33.450879, 126.569940)
            //     },
            //     {
            //         title: '근린공원',
            //         latlng: new daum.maps.LatLng(33.451393, 126.570738)
            //     }
            // ];
            console.log()

            // 마커 이미지의 이미지 주소입니다
        </script>

        <script>
            $(function () {
                $('.text_count').each(function () {
                    // count 정보 및 count 정보와 관련된 textarea/input 요소를 찾아내서 변수에 저장한다.
                    var $count = $('.count', this);
                    var $input = $(this).prev();
                    // .text()가 문자열을 반환하기에 이 문자를 숫자로 만들기 위해 1을 곱한다.
                    var maximumCount = $count.text() * 1;
                    // update 함수는 keyup, paste, input 이벤트에서 호출한다.
                    var update = function () {
                        var before = $count.text() * 1;
                        var now = maximumCount - $input.val().length;
                        // 사용자가 입력한 값이 제한 값을 초과하는지를 검사한다.
                        if (now < 0) {
                            var str = $input.val();
                            swal({
                                type: 'error',
                                title: '입력초과',
                                text: '글자 입력수를 초과하였습니다.',
                                showConfirmButton: false,
                                timer: 1500
                            })
                            $input.val(str.substr(0, maximumCount));
                            now = 0;
                        }
                        // 필요한 경우 DOM을 수정한다.
                        if (before != now) {
                            $count.text(now);
                        }
                    };
                    // input, keyup, paste 이벤트와 update 함수를 바인드한다
                    $input.bind('input keyup paste', function () {
                        setTimeout(update, 0)
                    });
                    update();
                });
            });
        </script>

        <script>
            // 캘린더
            $(document).ready(function () {
                $("#total_cost").text($("#total_cost_value").val())
            });


            $(function () {
                $(".calendar").datepicker({
                    dateFormat: 'yy/mm/dd',
                    firstDay: 1
                });

                $(document).on('click', '.date-picker .input', function (e) {
                    var $me = $(this),
                        $parent = $me.parents('.date-picker');
                    $parent.toggleClass('open');
                });



                $(".calendar").on("change", function () {

                    var $me = $(this),
                        $selected = $me.val(),
                        $parent = $me.parents('.date-picker');
                    $parent.find('.date_text').siblings('span').html($selected);
                    $parent.toggleClass('open');
                    var str = '';
                    var str2 = '';
                    for (var i = 0; i < $('#sdt').length; i++) {
                        str += $('#sdt').eq(i).html();
                    }
                    for (var i = 0; i < $('#edt').length; i++) {
                        str2 += $('#edt').eq(i).html();
                    }
                    var dateArray = str.split("/");
                    var dateArray2 = str2.split("/");
                    var dateObj = new Date(dateArray[0], Number(dateArray[1]) - 1, dateArray[2]);
                    var dateObj2 = new Date(dateArray2[0], Number(dateArray2[1]) - 1, dateArray2[2]);
                    var betweenDay = (dateObj2.getTime()) / 1000 / 60 / 60 / 24 - dateObj.getTime() /
                        1000 /
                        60 / 60 / 24;
                    var $edt = $('#edt')
                    var $sdt = $("#sdt")
                    console.log(betweenDay)
                    if (betweenDay || betweenDay == 0) {
                        if (betweenDay < 0) {
                            swal({
                                type: 'error',
                                title: '입력실패',
                                text: '출발일과 도착일을 확인해주세요',
                            })
                            document.getElementById('sdt').innerHTML = "";
                            document.getElementById('edt').innerHTML = "";
                            document.getElementById('cal_day').innerHTML = "0";
                            return;
                        }
                        document.getElementById('cal_day').innerHTML = betweenDay + 1;

                    }
                });
            });
        </script>


        <script>
            var button = document.getElementById("enter");
            var input = document.getElementById("input");
            var ul = document.getElementById("tag_box");
            var li = document.getElementById("tag_box").getElementsByTagName("li");
            var deleteBtns = document.getElementsByClassName("delete");
            var cnt

            function inputLength() {
                return input.value.length;
            }

            function createListElement() {
                cnt = $("#tag_box > li").length;
                console.log(cnt);
                if (cnt > 4) {
                    swal({
                        type: 'error',
                        title: '입력초과',
                        text: 'HashTag는 5개까지 입력가능합니다.',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    return;
                }
                if (input.value.replace(/\s/g, '') && input.value.replace(/\#/g, '')) {
                    var li = document.createElement("li");
                    var button = document.createElement("button");
                    button.appendChild(document.createTextNode("X"));
                    li.appendChild(document.createTextNode('#' + input.value.replace(/\s/g, '').replace(/\#/g, '')));
                    ul.appendChild(li);
                    li.appendChild(button)
                    input.value = "";

                    li.classList.add("items", "it");

                    button.addEventListener("click", deleteItem);
                    button.classList.add("delete");
                    return;
                }
            }

            function addNewItemAfterClick() {
                if (inputLength() > 0) {
                    createListElement();
                }
            }

            function addNewItemAfterKeypress(event) {
                if (inputLength() > 0 && event.keyCode === 13) {
                    createListElement();
                }
            }

            function toggleDone() {
                this.classList.toggle("done");
            }

            function deleteItem() {
                var child = document.activeElement.parentNode;
                ul.removeChild(child);
            }

            function manageGroupTag(tag, event, action) {
                for (let i = 0; i < tag.length; i++) {
                    tag[i].addEventListener(event, action);
                }
            }

            button.addEventListener("click", addNewItemAfterClick);
            input.addEventListener("keypress", addNewItemAfterKeypress);
            manageGroupTag(li, "click", toggleDone);
            manageGroupTag(deleteBtns, "click", deleteItem);
        </script>
        <script>
            var count = 2;

            function add_div() {
                $('#post_wraps').append(
                    "<div id=" + "'cont_" + count + "'" + " class='post_wrap'>" +
                    "<button class='cancel_btn' onclick='delete_cont(this.value)'></button>" +
                    "<div class='post_imgbox' data-toggle='modal' data-target='.bd-example-modal-lg" + count + "'>" +
                    '클릭하여 사진 등록' +
                    "<img src=''>" +
                    "</div>" +
                    "<div class='post_text'>" +

                    "<form>" +
                    "<input id='post_title_" + count + "'" +
                    "type='text' value='' class='post_titl' placeholder='장소'>" +
                    "<input id='post_address_" + count + "'" +
                    "<input id='post_address_'" + count +
                    "type='text' onclick='addrClick(this)' class='post_addr' value='' placeholder='주소' readonly data-toggle='modal' data-target='.bd-example-modal-lg-map1'>" +
                    "<input id='post_x_'" + count + " type='text' class='post_x' value='' placeholder='위도' hidden>" +
                    "<input id='post_y_'" + count + " type='text' class='post_y' value='' placeholder='경도' hidden>" +
                    "<div id='map' style='width:300px;height:300px;margin-top:10px;display:none'></div>" +
                    "<textarea id='post_text_form" + count + "'" +
                    "class='title_textarea text_area' placeholder='내용을 입력하세요.' data-is-observable='false'></textarea>" +
                    "<div class='text_count'>글자제한:" +
                    "<span class='count'>80</span>/80</div>" +
                    "<button onclick='map()'></button>" +
                    "</form>" +
                    "</div>" +
                    "</div>"
                );

                (function (count) {
                    $('#modalDiv').append(
                        "<div class='modal fade bd-example-modal-lg" + count + "'" +
                        "tabindex='-1' role='dialog' aria-labelledby='myLargeModalLabel' aria-hidden='true'>" +
                        "<div class='modal-dialog modal-lg'>" +
                        "<div class='modal-content'>" +
                        "<div class='modal-header'>" +
                        "<h5>사진업로드</h5>" +
                        "<button type='button' class='close' data-dismiss='modal' aria-label='Close'>" +
                        "<span aria-hidden='true'>&times;</span>" +
                        "</button>" +
                        "</div>" +
                        "<div id='trueForm" + count + "'" + ">" +
                        "<div class='dropzone' onclick='imgClickBoxsSub(this)'>" +
                        "<div>" +
                        "</div>" +
                        "<span class='dz_ico'>+</span>" +
                        "<div id='imgbox" + count + "'" + " class='imgboxs1'>업로드 대기중인 사진이 없습니다.</div>" +
                        "</div>" +

                        "<div id=imgbox2_" + count + "'" + " class='imgboxs2'>" +
                        "<p>업로드 완료된 사진</p>" +
                        "</div>" +
                        "<input id='fileupload" + count + "'" +
                        "class='fileuploads' type='file' name='files' multiple hidden>" +

                        "<div class='clear'>" +


                        "<button id='btnSubmit' class='btnSubmits' type='button'>사진업로드</button>" +

                        "</div>" +

                        "</div>" +

                        "</div>" +
                        "</div>" +
                        "</div>"
                    )
                })(count)


                count++;
                var imagesDiv = null;
                var previewsCnt2 = 0;
                $("#fileupload" + (count - 1)).fileupload({
                    url: serverRoot + '/json/upload/travel', // 서버에 요청할 URL
                    dataType: 'json', // 서버가 보낸 응답이 JSON임을 지정하기
                    sequentialUploads: true, // 여러 개의 파일을 업로드 할 때 순서대로 요청하기.
                    singleFileUploads: false, // 한 요청에 여러 개의 파일을 전송시키기.
                    autoUpload: true, // 파일을 추가할 때 자동 업로딩 하지 않도록 설정.
                    disableImageResize: /Android(?!.*Chrome)|Opera/
                        .test(window.navigator && navigator.userAgent), // 안드로이드와 오페라 브라우저는 크기 조정 비활성 시키기
                    previewMaxWidth: 120, // 미리보기 이미지 너비
                    previewMaxHeight: 120, // 미리보기 이미지 높이 
                    previewCrop: true, // 미리보기 이미지를 출력할 때 원본에서 지정된 크기로 자르기
                    processalways: function (e, data) {
                        imagesDiv = $(this).parent().children()[0].childNodes[2];
                        console.log('fileuploadprocessalways()...');
                        console.log(data.files);
                        console.log($(this).parent().children()[0].childNodes[2]);
                        console.log("len:", data.files.length);
                        $(imagesDiv).html("");

                        for (var i = 0; i < data.files.length; i++) {
                            try {
                                if (data.files[i].preview.toDataURL) {
                                    $(imagesDiv).append(
                                        "<div style='display:inline-block;position:relative;'>" +
                                        "<div style='position:absolute;top:44px;left:26px'>" +
                                        "<div id='floatingCirclesG'>" +
                                        "<div class='f_circleG' id='frotateG_01'></div>" +
                                        "<div class='f_circleG' id='frotateG_02'></div>" +
                                        "<div class='f_circleG' id='frotateG_03'></div>" +
                                        "<div class='f_circleG' id='frotateG_04'></div>" +
                                        "<div class='f_circleG' id='frotateG_05'></div>" +
                                        "<div class='f_circleG' id='frotateG_06'></div>" +
                                        "<div class='f_circleG' id='frotateG_07'></div>" +
                                        "<div class='f_circleG' id='frotateG_08'></div>" +
                                        "</div>" +
                                        "</div>" +
                                        "<img src=" + data.files[i].preview.toDataURL() +
                                        " style='width: 120px;' class=" +
                                        "'readyImgs'" + ">" +
                                        "</div>"
                                    )


                                    // $("<img>").attr('src', data.files[i].preview.toDataURL()).css('width',
                                    //     '120px').appendTo(imagesDiv);

                                    // console.log(data.files[i].name)
                                    $('#btnSubmit').removeAttr("disabled");
                                }
                            } catch (err) {
                                console.log("err");
                            }
                        }
                        console.log($('.readyImgs').length)


                        // $('#btnSubmit').unbind("click");
                        // $('#btnSubmit').click(function () {

                        //     alert("클릭")
                        //     data.submit();
                        // });
                    },
                    submit: function (e, data) { // 서버에 전송하기 직전에 호출된다.
                        console.log('submit()...');
                    },
                    done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
                        console.log('done()...');
                        console.log(data.result.files);

                        $.each(data.result.files, function (index, file) {
                            let previews = [];
                            $.each(data.files, function (index, file) {
                                previews.push(file.preview.toDataURL())
                            });
                            let imgBox = $(imagesDiv).parent().parent().children()[1]
                            $(imgBox).append(
                                "<div class='imgboxDiv' style='display:inline-block;width:120px;height:120px;overflow:hidden;border-radius:20%;margin:3px;'>" +
                                "<img src='" + previews[previewsCnt2] + "'>" +
                                "<input name='imgName' type='text' value='" + file.filename +
                                "'>" +
                                "<input name='imgX' type='text' value='" + file.filename + "'>" +
                                "<input name='imgY' type='text' value='" + file.filename + "'>" +
                                "</div>"
                            )
                            previewsCnt2++;

                            if ($('imagesDiv').children("img").length == 0) {
                                $(imagesDiv).html("업로드 대기중인 사진이 없습니다.")
                            }
                        });
                        previewsCnt2 = 0;


                    }
                });
            }

            function delete_cont() {
                var contDiv = document.activeElement.parentNode;
                swal({
                    title: '정말 삭제하시겠습니까?',
                    text: "작성한 모든 정보가 삭제됩니다.",
                    type: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: '네, 삭제할께요'
                }).then((result) => {
                    if (result.value) {
                        swal(
                            '삭제완료',
                            '작성중인 게시물을 삭제하였습니다.',
                            'success'
                        )
                        contDiv.remove();
                    }

                })

            }

            var $imgClickBox = null;
            var showBox = null;
            var showBox2 = null;
            // // 업로드 버튼 클릭
            // $('.dropzone').click(function (val) {
            //     console.log(val)
            //     imgClickBox = val.target.parentNode.parentNode.childNodes[5].click();
            // })
            function imgClickBoxs(val) {
                console.log(val.parentNode.childNodes[5])
                $imgClickBox = val.parentNode.childNodes[5]
                $imgClickBox.click();
                // imgClickBox.
            }

            function imgClickBoxsSub(val) {
                console.log(val.parentNode.childNodes[2])
                $imgClickBox = val.parentNode.childNodes[2]
                $imgClickBox.click();
                // imgClickBox.
            }

            // 사진업로드

            // var imgBox = $('#imgbox');

            // $('#fileupload').fileupload({
            //     url: serverRoot + '/json/upload/travel', // 서버에 요청할 URL
            //     dataType: 'json',

            //     /* "서버가 보낸 데이터가 JSON 문자열이다. 자바스크립트 객체로 바꿔라." 라는 의미*/
            //     done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
            //         console.log('done()...');
            //         console.log(data.result);

            //         $('<img>')
            //             .attr('src', serverRoot + '/files/' + data.result.filename + "_120x120.jpg")
            //             .appendTo(imgBox);
            //         //      $.each(data.result.fileList, function(index, file) {
            //         //        $('<p/>').text(file.filename + " : " + file.filesize).appendTo(document.body);
            //         //      });
            //     }
            // });
            /////
            // $("#fileupload1").fileupload({
            //     url: serverRoot + '/json/upload/travel', // 서버에 요청할 URL
            //     dataType: 'json', // 서버가 보낸 응답이 JSON임을 지정하기
            //     sequentialUploads: true, // 여러 개의 파일을 업로드 할 때 순서대로 요청하기.
            //     singleFileUploads: false, // 한 요청에 여러 개의 파일을 전송시키기.
            //     autoUpload: false, // 파일을 추가할 때 자동 업로딩 하지 않도록 설정.
            //     disableImageResize: /Android(?!.*Chrome)|Opera/
            //         .test(window.navigator && navigator.userAgent), // 안드로이드와 오페라 브라우저는 크기 조정 비활성 시키기
            //     previewMaxWidth: 120, // 미리보기 이미지 너비
            //     previewMaxHeight: 120, // 미리보기 이미지 높이 
            //     previewCrop: true, // 미리보기 이미지를 출력할 때 원본에서 지정된 크기로 자르기
            //     processalways: function (e, data) {
            //         console.log('fileuploadprocessalways()...');
            //         console.log(data.files);
            //         var imagesDiv = showBox;
            //         $(imagesDiv).hmtl("");
            //         for (var i = 0; i < data.files.length; i++) {

            //             try {
            //                 if (data.files[i].preview.toDataURL) {
            //                     $(imagesDiv).append(
            //                         "<div style='display:inline-block;position:relative;'>" +
            //                         "<div style='position:absolute;top:44px;left:26px'>" +
            //                         "<div id='floatingCirclesG'>" +
            //                         "<div class='f_circleG' id='frotateG_01'></div>" +
            //                         "<div class='f_circleG' id='frotateG_02'></div>" +
            //                         "<div class='f_circleG' id='frotateG_03'></div>" +
            //                         "<div class='f_circleG' id='frotateG_04'></div>" +
            //                         "<div class='f_circleG' id='frotateG_05'></div>" +
            //                         "<div class='f_circleG' id='frotateG_06'></div>" +
            //                         "<div class='f_circleG' id='frotateG_07'></div>" +
            //                         "<div class='f_circleG' id='frotateG_08'></div>" +
            //                         "</div>" +
            //                         "</div>" +
            //                         "<img src=" + data.files[i].preview.toDataURL() +
            //                         " style='width: 120px;' name=" + data.files[i].name + " class=" +
            //                         "'readyImgs'" + ">" +
            //                         "</div>"
            //                     )


            //                     // $("<img>").attr('src', data.files[i].preview.toDataURL()).css('width',
            //                     //     '120px').appendTo(imagesDiv);

            //                     // console.log(data.files[i].name)
            //                     $('#btnSubmit').removeAttr("disabled");
            //                 }
            //             } catch (err) {}
            //         }
            //         console.log($('.readyImgs').length)


            //         // $('#btnSubmit').unbind("click");
            //         // $('#btnSubmit').click(function () {

            //         //     alert("클릭")
            //         //     data.submit();
            //         // });
            //     },
            //     submit: function (e, data) { // 서버에 전송하기 직전에 호출된다.
            //         console.log('submit()...');
            //     },
            //     done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
            //         console.log('done()...');
            //         console.log(data.result.files);

            //         $.each(data.result.files, function (index, file) {
            //             let imgs = $("img[name=" + "'" + file.originname + "'" + "]")
            //             console.log($('#imgbox>img'))
            //             // $('<img>')
            //             // .attr('src', serverRoot + '/files/' + file.filename + "_120x120.jpg")
            //             // .appendTo(imgBox);
            //             $('#imgbox2_1').append(imgs)
            //             imgs.removeClass('readyImgs')
            //             // $("img[name=" + "'" + file.originname + "'" + "]").remove();
            //             console.log($('.readyImgs').length)
            //             if ($('.readyImgs').length < 1) {
            //                 $('#btnSubmit').attr("disabled", true);
            //             }

            //             if ($('#imgbox>img').length == 0) {
            //                 $('#imgbox').html("업로드 대기중인 사진이 없습니다.")
            //             }


            //         });
            //     }
            // });

            var previewImg = [];
            var previewsCnt = 0;
            $("#fileupload1").fileupload({
                url: serverRoot + '/json/upload/travel', // 서버에 요청할 URL
                dataType: 'json', // 서버가 보낸 응답이 JSON임을 지정하기
                sequentialUploads: true, // 여러 개의 파일을 업로드 할 때 순서대로 요청하기.
                singleFileUploads: false, // 한 요청에 여러 개의 파일을 전송시키기.
                autoUpload: true, // 파일을 추가할 때 자동 업로딩 하지 않도록 설정.
                disableImageResize: /Android(?!.*Chrome)|Opera/
                    .test(window.navigator && navigator.userAgent), // 안드로이드와 오페라 브라우저는 크기 조정 비활성 시키기
                previewMaxWidth: 120, // 미리보기 이미지 너비
                previewMaxHeight: 120, // 미리보기 이미지 높이 
                previewCrop: true, // 미리보기 이미지를 출력할 때 원본에서 지정된 크기로 자르기
                processalways: function (e, data) {

                    imagesDiv = $(this).parent().children()[0].childNodes[5];
                    console.log('fileuploadprocessalways()...');
                    $(imagesDiv).html("");

                    for (var i = 0; i < data.files.length; i++) {
                        try {
                            if (data.files[i].preview.toDataURL) {
                                $(imagesDiv).append(
                                    "<div style='display:inline-block;position:relative;'>" +
                                    "<div style='position:absolute;top:44px;left:26px'>" +
                                    "<div id='floatingCirclesG'>" +
                                    "<div class='f_circleG' id='frotateG_01'></div>" +
                                    "<div class='f_circleG' id='frotateG_02'></div>" +
                                    "<div class='f_circleG' id='frotateG_03'></div>" +
                                    "<div class='f_circleG' id='frotateG_04'></div>" +
                                    "<div class='f_circleG' id='frotateG_05'></div>" +
                                    "<div class='f_circleG' id='frotateG_06'></div>" +
                                    "<div class='f_circleG' id='frotateG_07'></div>" +
                                    "<div class='f_circleG' id='frotateG_08'></div>" +
                                    "</div>" +
                                    "</div>" +
                                    "<img src=" + data.files[i].preview.toDataURL() +
                                    " style='width: 120px;' class=" +
                                    "'readyImgs'" + ">" +
                                    "</div>"
                                )

                                // $("<img>").attr('src', data.files[i].preview.toDataURL()).css('width',
                                //     '120px').appendTo(imagesDiv);

                                // console.log(data.files[i].name)
                                // $('#btnSubmit').removeAttr("disabled");
                            }
                        } catch (err) {
                            console.log("err");
                        }
                    }


                    // $('#btnSubmit').unbind("click");
                    // $('#btnSubmit').click(function () {

                    //     alert("클릭")
                    //     data.submit();
                    // });
                },
                submit: function (e, data) { // 서버에 전송하기 직전에 호출된다.
                    console.log('submit()...');
                },
                done: function (e, data) { // 서버에서 응답이 오면 호출된다. 각 파일 별로 호출된다.
                    console.log('done()...');
                    console.log(data.result.files);

                    $.each(data.result.files, function (index, file) {
                        let previews = [];
                        $.each(data.files, function (index, file) {
                            previews.push(file.preview.toDataURL())
                        });
                        let imgBox = $(imagesDiv).parent().parent().children()[1]
                        $(imgBox).append(
                            "<div class='imgboxDiv' style='display:inline-block;width:120px;height:120px;overflow:hidden;border-radius:20%;margin:3px;'>" +
                            "<img src='" + previews[previewsCnt] + "'>" +
                            "<input name='imgName' type='text' value='" + file.filename + "'>" +
                            "<input name='imgX' type='text' value='" + file.filename + "'>" +
                            "<input name='imgY' type='text' value='" + file.filename + "'>" +
                            "</div>"
                        )
                        previewsCnt++;

                        if ($('imagesDiv').children("img").length == 0) {
                            $(imagesDiv).html("업로드 대기중인 사진이 없습니다.")
                        }
                    });
                    previewsCnt = 0;


                }
            });
        </script>


</body>


</html>